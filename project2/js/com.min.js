(function (window) {
    var SP = window.SP = SP || {};
    var param = XEpg.My.parseUrl();

    SP.ID = "HQHY";//SPID//4kgarden_play.js
    SP.PWD = "12345678"; // SP接口密码的32位MD5码(大写)//4kgarden_play.js
    SP.PROD_NUM = "1"; // 订购数量，如果是包月类产品，数量为1
    SP.ORDER_URL = "http://121.58.0.92/iptvsp/jsp/interface/epg/prodOrderCreate.jsp?";//4kgarden_play.js
    SP.ORDERPPV_URL = "http://121.58.0.92/iptvsp/jsp/interface/epg/ppv/PPVprodOrderCreate.jsp?"//4kgarden_play.js
    SP.ORDER_LLIST_URL = "http://121.58.0.92/iptv/portal/forward.jsp?topage=yonghu&epg_info=";
    
    SP.DATAPATH = "../data/";
    // SP.DATAPATH = "http://localhost:8088/vasData/data/";


    var menu = [];
    var recMenu = []; //行云首页推荐位，默认为一级导航的最后两个栏目
    var curMenu = {};
    var subMenu;
    var recSubMenu = []; //栏目首页推荐位，默认为二级导航的最后两个栏目
	var prodCodeArray = ["4KHY", "4KHY"]; //产品ID

	var authCodeArray = ["4KHYBJ"]; //包季ID

	var authPPVArray = ['4KHYPPV3', '4KHYPPV5', '4KHYPPV8']; //单品ID
	
	var buCodeArray = ["YKYSBY","YKYSBY"];
//  var pageIdArray = ["0501000","0502000"];
//  
//  var prodCodeArray = ["HQHY","HQHY"];
//  var authCodeArray = [
//                          ["HQHYKDP","HQHYBJ","HQHYRJ","HQHY"],
//                          ["HQHYKDP","HQHYBJ","HQHYRJ","HQHY"],
//                      ];
//  var authPPVArray = [
//                          ['HQHYPPV3','HQHYPPV5','HQHYPPV8','HQHYPPV1'],
//                          ['HQHYPPV3','HQHYPPV5','HQHYPPV8','HQHYPPV1']
//                     ];

//  var prodArray = [   [{name:"环球影院专区", price:"18", type:"月", describe:"尽享环球影院、环球剧场、动漫乐园、优酷独播、娱乐生活、环球纪实、精彩专题等7大栏目内容，会员级超清体验，原价25元仅需18元/月！（活动至2016年12月31日）"}],
//                      [{name:"优酷专区", price:"18", type:"月", describe:"尽享环球影院、环球剧场、少儿精选、综艺娱乐、环球纪实等5大类热门节目，会员级超清体验，原价25仅需18元/月！（活动至2016年8月31日）"}],
//                      [{name:"优酷专区", price:"18", type:"月", describe:"尽享环球影院、环球剧场、少儿精选、综艺娱乐、环球纪实等5大类热门节目，会员级超清体验，原价25仅需18元/月！（活动至2016年8月31日）"}]
//
//  ];
//  var orderType = [
//                      [{name:"单片：",type:"48小时"}],
//                      [{name:"环球影视产品包：",price:"48",type:"季"}],
//                      [{name:"环球影视产品包：",price:"18",type:"月"}],
//                  ];
    

    var detailObj = {
                        "综艺":"he-zyxq.html",
                        "纪实":"he-zyxq.html",
                    };
//00040000000514561071568685000000
    SP.indexParentCodeArray = {"grid1" : {"code":"00040000000515038989456203980000"},
                               "grid2" : {"code":"00040000000515038989956103040000"},
                               "grid3" : {"code":"00040000000515038989549303990000"},
                               "grid4" : {"code":"00040000000515038990032203050000"},
                            };


    //获取详情地址
    SP.getDetailUrl = function (programType, code, categoryCode,elementType,isIndex, parentCode) {//4kgarden_play.js
        var detail = detailObj[programType] || "particulars";
        if(detail=='particulars'){
        	if(elementType=='Program'){
	        	detail='he-particulars-list.html';
	        }else if(elementType=='Cseries'){
	        	detail='he-zyxq.html';
	        }else{
	        	detail='he-dsjxq.html';
	        }
        }
        var details = detail + "?contentCode=" + code + "&categoryCode=" + categoryCode;
        if(isIndex){
            details = detail + "&parentCode=" + parentCode;
        }
        return details;
    }
    SP.getIcon = function (price) {
        return price == "99" ? '<div class="icon"></div>' : '';
    }

    //用户检测
    var initEnv = SP.initEnv = function () {
        var param = XEpg.My.parseUrl(); // 解析地址栏参数 接收的变量;
        var exp = new Date();
        exp.setTime(exp.getTime() + 30 * 24 * 60 * 60 * 1000);
        if (param.UserID) {
            document.cookie = "UserID=" + param.UserID + ";expires=" + exp.toGMTString() + ";path=/";
            var UserID = param.UserID;  // 用户id
        } else {
            var UserID = XEpg.Util.getCookie("UserID");
        }
        if (param.iptv_flag) {
            document.cookie = "iptv_flag=" + param.iptv_flag + ";expires=" + exp.toGMTString() + ";path=/";
            var iptv_flag = param.iptv_flag; // zx(中兴),hw(华为)
        } else {
            var iptv_flag = XEpg.Util.getCookie("iptv_flag");
        }
        if (param.epg_info) {
            document.cookie = "epg_info=" + param.epg_info + ";expires=" + exp.toGMTString() + ";path=/";
            var epg_info = param.epg_info; // zx(中兴),hw(华为)
        } else {
            var epg_info = XEpg.Util.getCookie("epg_info");
        }
        if (param.backUrl) {
            document.cookie = "backUrl=" + decodeURIComponent(param.backUrl) + ";expires=" + exp.toGMTString() + ";path=/";
            var backUrl = decodeURIComponent(param.backUrl); // zx(中兴),hw(华为)
        } else {
            var backUrl = XEpg.Util.getCookie("backUrl");
        }
        //stb
        var stb="";
        if(typeof(Authentication)!="undefined"){
            stb=Authentication.CTCGetConfig("STBType");
        }
        SP.UserID = UserID;//4kgarden_play.js//userID	String	用户账号
        SP.iptv_flag = iptv_flag;//epgPlatformType	int	0：华为 1：中兴，默认为0
        SP.epg_info = epg_info;//
        SP.backUrl = backUrl;
        SP.stb = stb;//stb	String	用户盒子型号
    }
    initEnv();
    //SP自己生成的订单ID  1--24  随机数//4kgarden_play.js
    SP.getOrderId = function(){
        var time = new Date().getTime(); // 1437018018536   共13位数
        var num = "";   // 10位
        for (var i = 0; i < 10; i++) {
            num += Math.floor(Math.random() * 10);
        }
        return time + num;  // 得到23位 订单号 随机数
    }
    //获取当前频道 电影/剧集/少儿
    SP.getCurMenu = function() {
        return curMenu;
    }
    //行云首页推荐位
    SP.getRecMenu = function () {
        return recMenu;
    }
    //默认图片
    imgError = function (el) {
        el.src = "../static/img/img_err_1.png";
    };
})(window);


